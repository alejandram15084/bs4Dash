dim(datos)
#Obtener nombres
names(datos)
#Valores faltantes (NA)
colSums(is.na(datos))
#Resumen
describe(datos)
# Resumen con describe()
resumen <- describe(datos[, c("sleep_hours", "sleep_quality_score", "daytime_sleepiness", "stress_level")])
# Seleccionar columnas de interés
resumen %>%
select(n, mean, median, sd, min, max, range, skew, kurtosis)
# Media de horas de sueño
mean(datos$sleep_hours, na.rm = TRUE)
# Mediana de nivel de estrés
median(datos$stress_level, na.rm = TRUE)
#Instalación de paquetes
#install.packages(c("tidyverse", "janitor", "psych", "ggplot2", "gt", "rstatix","car", "effsize", "pwr", "broom", "pROC", "DescTools", "GGally"))
#Librerias
library(tidyverse) #manejo de datos
library(factoextra)
library(ade4)
library(GGally)
library(dplyr) #manipular y transformar datos
library(psych) #estadistica descriptiva
library(corrplot)
library(ggpubr) #graficos comparativos
library(ggplot2)
library(e1071)
#Cargar base de datos
datos <- readr::read_csv("sleep_deprivation_dataset_detailed.csv")
#Limpiar nombres
datos <- janitor::clean_names(datos)
#Ver primeros registros
head(datos)
#Revisar estructura
str(datos)
#Ver columnas y filas
dim(datos)
#Obtener nombres
names(datos)
#Valores faltantes (NA)
colSums(is.na(datos))
#Resumen
describe(datos)
# Resumen con describe()
resumen <- describe(datos[, c("sleep_hours", "sleep_quality_score", "daytime_sleepiness", "stress_level")])
# Seleccionar columnas de interés
resumen %>%
select(n, mean, median, sd, min, max, range, skew, kurtosis)
# Media de horas de sueño
mean(datos$sleep_hours, na.rm = TRUE)
# Mediana de nivel de estrés
median(datos$stress_level, na.rm = TRUE)
# Moda de la somnolencia diurna.
moda <- function(x) {
ux <- unique(x)
ux[which.max(tabulate(match(x, ux)))]
}
moda(datos$daytime_sleepiness)
sd(datos$stroop_task_reaction_time)
var(datos$stroop_task_reaction_time)
#Asimetría
skewness(datos$pvt_reaction_time)
# Curtosis
kurtosis(datos$pvt_reaction_time)
hist(datos$pvt_reaction_time,
main = "Distribución de tiempos de reacción (PVT)",
xlab = "Tiempo de reacción",
col = "lightgreen",
probability = TRUE)
lines(density(datos$pvt_reaction_time), col="red", lwd = 2)
# Distribución de género
table(datos$gender)
#Distribución procentual
tabla_genero <- table(datos$gender)
prop.table(tabla_genero) *100
# Distribución de nivel de actividad física
table(datos$physical_activity_level)
#Histograma de horas de sueño
ggplot(datos, aes(x = sleep_hours)) +
geom_histogram(binwidth = 0.5, fill = "deepskyblue2",color = "black", alpha = 0.7) +
labs(title = "Distribución de horas de sueño", x = "Horas", y ="Frecuencia")
#Boxplots horas de sueño por genero
ggplot(datos, aes(x = gender, y = sleep_hours, fill = gender)) +
geom_boxplot() +
labs(title = "Horas de Sueño por Género", x = "Género", y ="Horas sueño")
# Gráfico de barras de nivel de actividad física
ggplot(datos, aes(x =physical_activity_level, fill = physical_activity_level)) +
geom_bar() +
scale_fill_grey(start = 0.8, end=0.2)+
labs(title = "Nivel de Actividad Física", x = "Nivel", y = "Frecuencia")
cor.test(datos$sleep_hours, datos$n_back_accuracy)
cor.test(datos$sleep_hours, datos$stroop_task_reaction_time)
cor.test(datos$sleep_hours, datos$pvt_reaction_time)
#Correlaciones
cor_matrix <- cor(datos[, c("sleep_hours", "sleep_quality_score", "stroop_task_reaction_time", "pvt_reaction_time")])
corrplot(cor_matrix, method = "color")
# Scatterplot de sueño vs tiempo de reacción (PVT)
ggplot(datos, aes(x = sleep_hours, y = pvt_reaction_time)) +
geom_point(color = "blue") +
geom_smooth(method = "lm", se = FALSE, color = "red") +
labs(title = "Relación entre Sueño y Tiempo de Reacción (PVT)",
x = "Horas de Sueño", y = "Tiempo de Reacción (ms)")
# Gráfico de barras de nivel de actividad física
ggplot(datos, aes(x =physical_activity_level, fill = physical_activity_level)) +
geom_bar() +
scale_fill_grey(start = 0.8, end=0.2)+
labs(title = "Nivel de Actividad Física", x = "Nivel", y = "Frecuencia")
# Gráfico de barras de nivel de actividad física
ggplot(datos, aes(x =physical_activity_level, fill = physical_activity_level)) +
geom_bar() +
scale_fill_grey(start = 0.8, end=0.2)+
labs(title = "Nivel de Actividad Física", x = "Nivel", y = "Frecuencia")
cor.test(datos$sleep_hours, datos$n_back_accuracy)
cor.test(datos$sleep_hours, datos$stroop_task_reaction_time)
cor.test(datos$sleep_hours, datos$pvt_reaction_time)
#Correlaciones
cor_matrix <- cor(datos[, c("sleep_hours", "sleep_quality_score", "stroop_task_reaction_time", "pvt_reaction_time")])
corrplot(cor_matrix, method = "color")
# Scatterplot de sueño vs tiempo de reacción (PVT)
ggplot(datos, aes(x = sleep_hours, y = pvt_reaction_time)) +
geom_point(color = "blue") +
geom_smooth(method = "lm", se = FALSE, color = "red") +
labs(title = "Relación entre Sueño y Tiempo de Reacción (PVT)",
x = "Horas de Sueño", y = "Tiempo de Reacción (ms)")
shiny::runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
library(shiny)
library(shinydashboard)
library(dplyr)
library(plotly)
library(leaflet)
library(DT)
library(shinyWidgets)
library(tidyverse)
library(janitor)
library(readr)
library(purrr)
# --- Cargar datos ---
ruta <- "C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM/data/sexo"
#Listar todos los archivos CSV dentro de esa carpeta
archivos <- list.files(path = ruta, pattern = "\\.csv$", full.names = TRUE)
#Leer todos los archivos
datos_sexo <- lapply(archivos, function(file){
#Leer archivo
df <- read_csv(file)
#Extraer nombre de municipio
municipio <- gsub("2\\.|\\.csv", "", basename(file))
#Agregar columna
df$Municipio <- municipio
return(df)
}) %>% bind_rows()
# --- Cargar datos ---
ruta <- "C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM/data/sexo"
View(datos_sexo)
length(archivos)
dim(datos_sexo)
View(datos_sexo)
unique(datos_sexo$Municipio)
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
ui <- dashboardPage(
# --- HEADER ---
dashboardHeader(
),
# --- SIDEBAR ---
dashboardSidebar(
sidebarMenu(
menuItem("Tabla", tabName = "tabla", icon = icon("table")),
menuItem("Gráfico", tabName = "grafico", icon = icon("chart-line"))
)
),
# --- BODY ---
dashboardBody(
tabItems(
tabItem(tabName = "tabla",
DTOutput("tabla_datos")),
tabItem(tabName = "grafico",
plotlyOutput("grafico_municipio"))
)
)
)
ui <- dashboardPage(
# --- HEADER ---
dashboardHeader(
),
# --- SIDEBAR ---
dashboardSidebar(
sidebarMenu(
menuItem("Indicadores de Salud Mental", tabName = "indicador_sm", icon = icon("health")),
menuItem("Indicadores Epidemiológicos en Salud Mental", tabName = "inicio", icon = icon("home")),
)
),
# --- BODY ---
dashboardBody(
)
)
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
ui <- dashboardPage(
# --- HEADER ---
dashboardHeader(),
# --- SIDEBAR ---
dashboardSidebar(
collapsed= FALSE, # inicia abierto
sidebarMenu(
id = "menu",
#pestaña 1
menuItem("Indicadores de Salud Mental",
tabName = "indicador_sm",
icon = icon("health")),
#pestaña 2
menuItem("Indicadores Epidemiológicos en Salud Mental",
tabName = "indicador_epi",
icon = icon("home")),
#pestaña 3
menuItem("Tasa de suicidio",
tabName = "suicidio",
icon = icon("skull-crossbones"))
)
),
# --- BODY ---
dashboardBody(
#Importar CSS
tags$head(
tags$link(rel = "stylesheet", type = "text/css", href= "custom.css")
),
tabItem(tabName = "indicador_SM")
)
)
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp()
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
runApp('C:/Users/aleja/OneDrive - Universidad de Antioquia/Archivos de JUAN PABLO SANCHEZ ESCUDERO - Alejandra, Valentina, Víctor/DashboardSM')
shiny::runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
install.packages("bs4Dash")
library(bs4Dash)
runApp()
ui <- dashboardPage(
dashboardHeader(
title = "",
),
dashboardSidebar(
sidebarMenu(
menuItem("Indicadores de salud mental", tabName = "indicadores", icon = icon("chart-line")),
menuItem("Tasa de intento de suicidio", tabName = "suicido", icon = icon("heartbeat")),
menuItem("Indicador de demencia", tabName = "demencia", icon = icon("brain")),
menuItem("Uso de servicios", tabName = "serv", icon = icon("hospital"))
)
),
dashboardBody(
#Enlace CSS
includeCSS("www/custom.css"),
tabItems(
# ---- TAB PRINCIPAL ----
tabItem(tabName = "indicadores",
# Pestañas tipo pills
fluidRow(
column(width = 12,
tags$div(class='tabs-row',
tags$button(class='tab-pill active', `data-tab`='infra', 'Infraestructura'),
tags$button(class='tab-pill', `data-tab`='anos', 'Años perdidos'),
tags$button(class='tab-pill', `data-tab`='atencion', 'Atención'),
tags$button(class='tab-pill', `data-tab`='hospital', 'Hospitalización'),
tags$button(class='tab-pill', `data-tab`='mortalidad', 'Mortalidad')
)
)
),
# Panel de filtros
box(width = 12, status = 'primary', solidHeader = TRUE, collapsible = FALSE,
div(class='filter-panel',
fluidRow(
column(2, selectInput('year_min','Año desde', choices = years, selected = min(years))),
column(2, selectInput('year_max', 'Año hasta', choices = years, selected = max(years))),
# Selección de tipo ---
column(2, selectInput('tipo', 'Tipo',
choices = c('Sexo', 'Edad', 'Geografia'),
selected = 'Geografia')),
# Nuevo: filtro de categoría según el tipo
column(3, uiOutput('categoria_ui')),
column(3, selectInput('muni', 'Municipios',
choices = c('Todos', municipios),
multiple = TRUE)),
column(12, br()), # salto de línea
column(3, actionButton('reset_filters', 'Limpiar filtros', icon = icon('times')))
# column(2, selectInput('sexo', 'Sexo', choices = c('Todos', sexos))),
# column(3, selectInput('muni', 'Municipios', choices = c('Todos', municipios), multiple = TRUE)),
# column(3, actionButton('reset_filters', 'Limpiar filtros', icon = icon('times')))
)
)
),
# Cards reordenables
fluidRow(
column(width = 12,
tags$div(id = 'cards-area', class = 'sortable-container',
make_metric_card('c1','IPS con Psicología', '12,302'),
make_metric_card('c2','IPS con Psiquiatría', '12,302'),
make_metric_card('c3','Camas de Psiquiatría', '12,302'),
make_metric_card('c4','Camas de cuidado agudo mental', '12,302'),
make_metric_card('c5','Camas de farmacodependencia', '12,302')
)
)
),
), # cierre tabItem indicadores
# ---- OTROS TABS ----
tabItem(tabName = 'suicido', h3('Contenido: Tasa de intento de suicidio')),
tabItem(tabName = 'demencia', h3('Contenido: Indicador de demencia')),
tabItem(tabName = 'serv', h3('Contenido: Uso de servicios'))
)
),
skin = "black",
)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
install.packages("echarts4r")
runApp()
unique(datos_total$Categoria)
View(datos_total)
runApp()
runApp()
runApp()
# --- Normalizar categorías ---
datos_total <- datos_total %>%
mutate(Categoria = str_to_title(  #convertir a titulo
trimws(Categoria))  # elimina espacios al inicio y final
)
categorias_sexo <- sort(unique(na.omit(trimws(datos_total$Categoria[datos_total$Tipo == "Sexo"]))))
categorias_sexo <- sort(unique(na.omit(trimws(datos_total$Categoria[datos_total$Tipo == "Edad"]))))
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
View(datos_total)
runApp()
runApp()
df <- df %>%
mutate(
Categoria = Sexo,    # columna unificada
Tipo = "Sexo"
) %>%
select(Municipio, Indicador1, Ano, Tipo, Categoria, Valor1) #categorias de interes
library(shiny)
library(shinydashboard)
library(dplyr) #Manipulación de datos
library(plotly) #Gráficos interactivos
library(leaflet) #Mapas interactivos
library(DT) #Tablas interactivas
library(shinyWidgets) #Inputs
library(tidyverse)
library(janitor) #Limpieza de datos
library(readr) #Lectura CSV
library(purrr) #Map
library(shinyjs) #Funciones para Shiny
library(bs4Dash) #Estilo de dashboard
library(echarts4r) #Gráficos con la librería JS Echarts
# --- Ruta a los datos  ---
ruta_sexo <- "C:/Users/aleja/Desktop/DashboardSM/data/sexo"
ruta_edad <- "C:/Users/aleja/Desktop/DashboardSM/data/edad"
ruta_geografia <- "C:/Users/aleja/Desktop/DashboardSM/data/geografia"
# --- Leer BD geografía ---
archivos_geografia <- list.files(path = ruta_geografia, pattern = "\\.csv$", full.names = TRUE) #buscar todos los archivos de la carpeta
datos_geografia <- lapply(archivos_geografia,
function(file){
df <- read_csv(file, show_col_types = FALSE)
municipio <- gsub("1\\.|\\.csv", "", basename(file)) #extraer el nombre del municipio del archivo
df$Municipio <- municipio
df <- df %>%
mutate(
Categoria = NA,    # columna para unificar
Tipo = "Geografia"
) %>%
select(Municipio, Indicador1, Ano, Tipo, Categoria, Valor1) #categorias de interes
return(df)
}) %>% bind_rows()
# --- Leer BD sexo ---
archivos_sexo <- list.files(path = ruta_sexo, pattern = "\\.csv$", full.names = TRUE) #buscar todos los archivos de la carpeta
datos_sexo <- lapply(archivos_sexo,
function(file){
df <- read_csv(file, show_col_types = FALSE)
municipio <- gsub("2\\.|\\.csv", "", basename(file)) #extraer el municipio del nombre del archivo
df$Municipio <- municipio
df <- df %>%
mutate(
Categoria = Sexo,    # columna unificada
Tipo = "Sexo"
) %>%
select(Municipio, Indicador1, Ano, Tipo, Categoria, Valor1) #categorias de interes
return(df)
}) %>% bind_rows()
# --- Leer BD sexo ---
archivos_sexo <- list.files(path = ruta_sexo, pattern = "\\.csv$", full.names = TRUE) #buscar todos los archivos de la carpeta
datos_sexo <- lapply(archivos_sexo,
function(file){
df <- read_csv(file, show_col_types = FALSE)
municipio <- gsub("2\\.|\\.csv", "", basename(file)) #extraer el municipio del nombre del archivo
df$Municipio <- municipio
df <- df %>%
mutate(
Categoria = sexo,    # columna unificada
Tipo = "Sexo"
) %>%
select(Municipio, Indicador1, Ano, Tipo, Categoria, Valor1) #categorias de interes
return(df)
}) %>% bind_rows()
runApp()
runApp()
packageVersion("bs4Dash")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp('C:/Users/aleja/AppData/Local/Temp/93de4e68-ab74-4627-93f9-6b74820d9b9f_mental-health-survey-main.zip.b9f/mental-health-survey-main/dashboard.R')
runApp('C:/Users/aleja/Downloads/mental-health-survey-main/dashboard.R')
shiny::runApp('~/bs4Dash')
runApp('~/bs4Dash')
runApp('~/bs4Dash')
runApp('~/bs4Dash')
shiny::runApp()
runApp()
